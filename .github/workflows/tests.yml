name: "Tests"
on:
  pull_request:
  push:
jobs:
  tests:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2.4.0
    - run: install -d -m755 -o $(id -u) -g $(id -g) /nix
    - run: curl -L https://nixos.org/nix/install | sh
    - run: source $HOME/.nix-profile/etc/profile.d/nix.sh
    - run: nix-shell --run "cargo test"
